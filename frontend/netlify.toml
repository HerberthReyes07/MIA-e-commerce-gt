[build]
  # Directorio base donde está tu proyecto Angular
  base = "frontend"
  
  # Comando para construir tu aplicación
  command = "npm run build"
  
  # Directorio donde Angular genera los archivos de producción
  # Con Angular 17+ usando @angular/build:application, el output está en dist/frontend/browser
  publish = "dist/frontend/browser"

[functions]
  # Usar ruta relativa desde la raíz del repo para evitar ambigüedad con base
  directory = "frontend/netlify/functions"

# SPA fallback - debe capturar todo EXCEPTO las funciones serverless
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
  # No aplicar este redirect a las funciones de Netlify
  force = false
