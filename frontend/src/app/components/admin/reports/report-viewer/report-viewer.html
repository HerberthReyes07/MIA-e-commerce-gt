<div class="report-viewer">
	<mat-card class="header-card" style="padding-bottom: 0px;">
		<div class="header">
			<h2 style="margin-bottom: 18px;">{{ title }}</h2>
			<div class="filters" *ngIf="hasDateFilter">
				<mat-form-field appearance="outline" class="date-field">
					<mat-label>Rango de fechas</mat-label>
					<mat-date-range-input [rangePicker]="picker">
						<input matStartDate placeholder="Inicio" [(ngModel)]="startDate">
						<input matEndDate placeholder="Fin" [(ngModel)]="endDate">
					</mat-date-range-input>
					<mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
					<mat-date-range-picker #picker></mat-date-range-picker>
				</mat-form-field>
				<button mat-stroked-button color="primary" (click)="applyRange()" style="margin-bottom: 20px; margin-left: 12px;">
					<mat-icon>filter_alt</mat-icon>
					Aplicar
				</button>
				<button mat-button (click)="clearRange()" style="margin-bottom: 20px;">
					<mat-icon>clear</mat-icon>
					Limpiar
				</button>
			</div>
		</div>
	</mat-card>

	<mat-card>
		<div class="table-wrapper" *ngIf="!isLoading; else loadingTpl">
			<table mat-table [dataSource]="data" class="mat-elevation-z1 full-width">
				<ng-container *ngFor="let col of columns" [matColumnDef]="col.key">
					<th mat-header-cell *matHeaderCellDef>{{ col.label }}</th>
					<td mat-cell *matCellDef="let row">{{ formatCell(row, col) }}</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
				<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
			</table>
			<div class="no-data" *ngIf="data.length === 0">
				<mat-icon>info</mat-icon>
				No hay datos para mostrar
			</div>
		</div>
		<ng-template #loadingTpl>
			<div class="loading">
				<mat-icon>hourglass_empty</mat-icon>
				Cargando reporte...
			</div>
		</ng-template>
	</mat-card>
</div>
